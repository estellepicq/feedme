var foodItems,searchSection=document.getElementById("search"),listElt=document.getElementById("list"),filteredListElt=document.getElementById("filteredList"),searchInput=document.getElementById("searchInput");function getFooodItems(){Aias.HTTP.GET("http://nutrimetrics.estellepicq.com/food?fodmaps=1","json").then(e=>{displayList(foodItems=e),displayFilteredList(foodItems)}).catch(e=>{console.log("error",e)})}function displayList(e){e.forEach(e=>{var t=document.createElement("div"),d=e.fodmaps_cutoff?" - "+e.fodmaps_cutoff+" max":"";t.textContent=e.name+d,t.setAttribute("class","item");var a=e.fodmaps_category.toLowerCase().replace(/ /g,""),s=document.getElementById(a);if(!s){(s=document.createElement("div")).id=a,s.setAttribute("class","category"),listElt.append(s);var i=document.createElement("h4");i.textContent=e.fodmaps_category,s.append(i);var n=document.createElement("div");n.id=a+"_low",s.appendChild(n);var o=document.createElement("h5");o.textContent="Pauvres en FODMAPs",n.appendChild(o);var c=document.createElement("div");c.id=a+"_high",s.appendChild(c);var l=document.createElement("h5");l.textContent="Riches en FODMAPs",c.appendChild(l)}document.getElementById(a+"_"+e.fodmaps_indicator).appendChild(t)})}function displayFilteredList(e){e.forEach((e,t)=>{var d=document.createElement("div"),a=e.fodmaps_cutoff?" - "+e.fodmaps_cutoff+" max":"",s="low"===e.fodmaps_indicator?'<div class="indicator low"></div>':'<div class="indicator high"></div>';d.innerHTML=s+e.name+a,d.setAttribute("class","filtered-item"),d.id="item_"+t,filteredListElt.appendChild(d)})}getFooodItems(),searchInput.addEventListener("keyup",function(){var e=searchInput.value;foodItems.forEach((t,d)=>{var a=document.getElementById("item_"+d);searchInput.value?(searchSection.classList.add("filtering"),t.name.toLowerCase().includes(e.toLowerCase())?a.classList.contains("displayed")||a.classList.add("displayed"):a.classList.remove("displayed")):(searchSection.classList.remove("filtering"),a.classList.remove("displayed"))})});