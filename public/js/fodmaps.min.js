"use strict";var searchSection=document.getElementById("search"),listElt=document.getElementById("list"),filteredListElt=document.getElementById("filteredList"),searchInput=document.getElementById("searchInput"),noFoodMessage=document.getElementById("noFoodMessage"),foodItems=[];function getFoodItems(){Aias.HTTP.setEventType("observable"),Aias.HTTP.GET("http://nutrimetrics.estellepicq.com/food?fodmaps=1","json").subscribe(function(e){e&&e.length?(displayList(foodItems=e),displayFilteredList(foodItems)):displayNoFoodMessage("Etrange, aucun aliment trouvé.")},function(e){displayNoFoodMessage("Oups, erreur dans la récupération des aliments.")})}function displayList(e){e.forEach(function(e){var t=document.createElement("div");t.innerHTML=createFoodItemTemplate(e),t.setAttribute("class","item");var s=e.fodmaps_category.toLowerCase().replace(/ /g,""),a=document.getElementById(s);if(!a){(a=document.createElement("div")).id=s,a.setAttribute("class","category"),listElt.append(a);var o=document.createElement("h4");o.textContent=e.fodmaps_category,a.append(o);var n=document.createElement("div");n.id=s+"_low",a.appendChild(n);var d=document.createElement("h5");d.textContent="Pauvres en FODMAPs",n.appendChild(d);var i=document.createElement("div");i.id=s+"_high",a.appendChild(i);var c=document.createElement("h5");c.textContent="Riches en FODMAPs",i.appendChild(c)}document.getElementById(s+"_"+e.fodmaps_indicator).appendChild(t)})}function displayFilteredList(e){e.forEach(function(e,t){var s=document.createElement("div");s.innerHTML=createFoodItemTemplate(e),s.setAttribute("class","filtered-item"),s.id="item_"+t,filteredListElt.appendChild(s)})}function createFoodItemTemplate(e){var t=e.fodmaps_cutoff?" - "+e.fodmaps_cutoff+" max":"";return("low"===e.fodmaps_indicator?'<div class="indicator low"></div>':'<div class="indicator high"></div>')+e.name+t}function displayNoFoodMessage(e){noFoodMessage.textContent=e,noFoodMessage.style.display="block"}getFoodItems(),searchInput.addEventListener("keyup",function(){var e=searchInput.value;foodItems.forEach(function(t,s){var a=document.getElementById("item_"+s);searchInput.value?(searchSection.classList.add("filtering"),t.name.toLowerCase().includes(e.toLowerCase())?a.classList.contains("displayed")||a.classList.add("displayed"):a.classList.remove("displayed")):(searchSection.classList.remove("filtering"),a.classList.remove("displayed"))})});